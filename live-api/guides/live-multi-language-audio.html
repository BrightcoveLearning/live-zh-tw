---
title: 實時多語言音頻
description: 本主題說明如何使用不同語言的多個音軌創建實時作業。
parent: Guides 
grandparent: Live API
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Requirements">需求</h2>
    <ul>
      <li>為啟用了多語言音頻功能的Live API設置的帳戶（有關詳細信息，請與您的客戶經理聯繫）</li>
      <li>實時API的API密鑰（設置帳戶時提供給您）</li>
      <li>支持RTP協議的編碼器。多語言音頻支持僅限於<code translate="No">rtp</code>或者<code translate="No">rtp-fec</code>協議。</li>
      <li>創建作業時，必須知道每個音軌的PID。</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Create_your_Live_Job">創建您的現場工作</h2>

    <p>為了將多個音軌添加到您的作業，創建實時作業時，必須在請求正文中提供音軌列表：</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "protocol": "rtp",
  "cidr_whitelist": [ /* omitted… */ ],
  "outputs": [ /* omitted… */ ],
  <span class="bcls-highlight">"alternate_audio": {
    "tracks": [ { Track Details } ]
  }</span>
}</code></pre>
    <h3>支持的字段<code translate="No">Track</code>目的</h3>
    <p>下表包含了支持的字段的完整說明<code translate="No">track</code>目的</p>
    <table class="bcls-table">
      <caption class="bcls-caption--table">田徑場</caption>
      <thead class="bcls-table__head">
          <tr>
              <th>欄位</th>
              <th>描述</th>
          </tr>
      </thead>
      <tbody class="bcls-table__body">
          <tr>
              <td><code translate="No">pid</code></td>
              <td><strong>必需的</strong>。從傳入TS中選擇的PID，該PID是在發送到Wowza的流文件中指定的軌道。</td>
          </tr>
          <tr>
              <td><code translate="No">language</code></td>
              <td>
                <strong>必需的</strong>。所使用語言的代碼。目前，這是靈活的，並且可以採用規範要求/支持的各種語言格式中的任何一種，特別是RFC5456 / BCP47（根據要求還包括ISO-639）。<a href="https://tools.ietf.org/html/rfc5646"> https://tools.ietf.org/html/rfc5646</a>
                <p>HLS&gt; <code translate="No">LANGUAGE</code>場地</p>
                <p>破折號&gt; <code translate="No">AdaptationSet:lang</code>場地</p>
              </td>
          </tr>
          <tr>
              <td><code translate="No">variant</code></td>
              <td>
                <strong>可選的</strong>。映射到DASH角色架構值：主要，替代，註釋，補充，配音。用於DASH角色<code translate="No">urn:mpeg:dash:role:2011</code>。默認為<code translate="No">main</code>。
                <p>HLS&gt;特性請參閱<a href="https://tools.ietf.org/html/rfc8216#section-4.3.4.1">https://tools.ietf.org/html/rfc8216#section-4.3.4.1</a></p>
              </td>
          </tr>
          <tr>
              <td><code translate="No">label</code></td>
              <td><strong>可選的</strong>。曲目所用的文字說明，如果可能的話，最好由播放器使用。用於：HLS&gt; <code translate="No">NAME</code>場地。默認為<code translate="No">language</code>每個軌道都有一個ID，例如<code translate="No">en-0</code>如果未指定。</td>
          </tr>
          <tr>
              <td><code translate="No">streams</code> []</td>
              <td>
                <strong>可選的</strong>。如果不存在，則僅使用默認音頻設置進行複制。 
                <p>HLS&gt; <code translate="No">GROUP-ID</code>。（目的）</p>
                <p>例子：<code translate="No">{ “source”: “720p” }</code> -輸出源的匹配標籤。</p> <p>這模仿了<code translate="No">streams</code>播放列表輸出類型的字段。</p>
              </td>
          </tr>
          <tr>
              <td><code translate="No">default</code></td>
              <td>
                <strong>必需，除非默認</strong>。哪個音軌應標記為<code translate="No">DEFAULT</code>在裡面<code translate="No">EXT-X-MEDIA</code>以及將其混合到視頻流中的方式*
                <p>如果不存在，則默認為第一個。</p>
                <p>*如果定義了多個具有不同默認值的播放列表，則頂級默認曲目為混合曲目</p>
              </td>
          </tr>
      </tbody>
  </table>
  </section>
  <section class="bcls-section">
    <h2 id="example">範例</h2>
    <p>此示例主體將創建一個包含2條音軌的Job。</p>
    <h3>要求</h3>
<pre><code class="language-http" translate="No">POST https://api.bcovlive.io/v1/jobs
  Content-Type: application/json
  X-API-KEY: <span class="bcls-input">your_API_key</span></code></pre>
    <h3>要求正文</h3>
<pre class="line-numbers">&lt;code class="language-json" translate="No&gt;{ "live_stream": true, "region": "us-west-2", "protocol": "rtp", "cidr_whitelist": [ "0.0.0.0/0" ], "outputs": [ { "label": "hls720p", "live_stream": true, "height": 720, "video_bitrate": 2400, "segment_seconds": 6, "keyframe_interval": 90 }, { "label": "hls540p", "live_stream": true, "height": 540, "video_bitrate": 1200, "segment_seconds": 6, "keyframe_interval": 90 } ], <span class="bcls-highlight">"alternate_audio": { "tracks": [ { "label": "English", "language": "en", "variant": "main", "pid": 257, "default": true }, { "label": "Spanish", "language": "es", "variant": "main", "pid": 258 } ] }</span> }</code></pre>
    <details>
      <summary><h2>樣品回复</h2></summary>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "id": "76f814fbcd7840e99ebf0e335c933730",
  "outputs": [
      {
          "id": "0-76f814fbcd7840e99ebf0e335c933730",
          "playback_url": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/profile_0/chunklist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/profile_0/chunklist_dvr.m3u8",
          "playback_url_vod": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/profile_0/chunklist_vod.m3u8",
          "playback_added_cdns": [],
          "label": "hls720p"
      },
      {
          "id": "1-76f814fbcd7840e99ebf0e335c933730",
          "playback_url": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/profile_1/chunklist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/profile_1/chunklist_dvr.m3u8",
          "playback_url_vod": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/profile_1/chunklist_vod.m3u8",
          "playback_added_cdns": [],
          "label": "hls540p"
      },
      {
          "id": "2-76f814fbcd7840e99ebf0e335c933730",
          "playlist_type": "defaultS3",
          "type": "playlist",
          "alternate_audio": {
              "tracks": [
                  {
                      "label": "English",
                      "language": "en",
                      "name": "Alt0",
                      "pid": 257,
                      "playlistDefault": true,
                      "default": true,
                      "variant": "main",
                      "profile_sources": [
                          "profile_0"
                      ]
                  },
                  {
                      "label": "Spanish",
                      "language": "es",
                      "name": "Alt1",
                      "pid": 258,
                      "playlistDefault": false,
                      "default": false,
                      "variant": "main",
                      "profile_sources": [
                          "profile_0"
                      ]
                  }
              ]
          },
          "filename": "playlist.m3u8",
          "dvr_filename": "playlist_dvr.m3u8",
          "playback_url": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/playlist.m3u8",
          "playback_url_dvr": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/playlist_dvr.m3u8",
          "playback_added_cdns": []
      }
  ],
  <span class="bcls-highlight">"stream_url": "rtp://ep3-usw2.a-live.io:11780"</span>,
  "stream_name": "76f814fbcd7840e99ebf0e335c933730.stream",
  "static": false,
  "alternate_audio": {
      "tracks": [
          {
              "label": "English",
              "language": "en",
              "pid": 257,
              "default": true,
              "variant": "main",
              "name": "Alt0"
          },
          {
              "label": "Spanish",
              "language": "es",
              "pid": 258,
              "default": false,
              "variant": "main",
              "name": "Alt1"
          }
      ]
  },
  "event_length": 93600,
  "encryption": {},
  <span class="bcls-highlight">"playback_url": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/playlist.m3u8"</span>,
  "playback_url_dvr": "https://playback-qa.a-live.io/76f814fbcd7840e99ebf0e335c933730/us-west-2/NA/playlist_dvr.m3u8",
  "playback_added_cdns": []
}
</code></pre>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="Configure_your_encoder">設定您的編碼器</h2>
    <p>配置您的編碼器，以通過RTP將MPEG-TS傳遞到創建響應中的stream_url。確保在請求主體中提供的音軌在編碼器中配置了正確的PID。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Test_Playback">測試播放</h2>
    <p>將playback_url加載到<a href="http://players.brightcove.net/3303963094001/player-reference-app/index.html">Brightcove播放器</a>或Safari確認播放。</p>
  </section>
  <section class="bcls-section">
    <h2 id="DRM Playback">DRM_Playback</h2>
    <p>當前，僅通過赶超（時移）服務支持DRM。將這些字段添加到“創建作業"請求請求正文中：</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "drm": {
    "modes": [
      "all"
    ]
  },
  "timeshift": {
    "type": "single",
    "startover_duration": 36000,
    "skip_live_output": true
  }
}
</code></pre>
    <p>響應將包括DRM輸出和<code translate="No">timeshift_url</code>用於播放。</p>
  </section>
</article>