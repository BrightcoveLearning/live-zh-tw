---
title:  '為實時流安排剪輯生成'
description: '使用 Clip 端點，您可以安排現有實時作業的剪輯事件。在指定的時間，我們的系統將進行必要的 API 呼叫，代表您啟動 Clip Job。'
parent: Guides 
grandparent: Live API
layout: staging —

<!-- Remember to change API reference links when going live -->

<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
	<section class="bcls-section">
		<h2 id="Requirements">需求</h2>
		<ul>
			<li>您帳戶的實時API密鑰。</li>
			<li>您的真實帳戶必須啟用了計劃程序替代。</li>
		</ul>
	</section>
	<section class="bcls-section">
		<h2 id="Create_a_Clip_scheduler_workflow">創建剪輯計劃程序工作流</h2>
		<p>創建剪輯時，您必須同時指定剪輯時間邊界（在<code translate="no">輸出</code>字段）和預定時間（<code translate="no">時間_UTC</code>字段）發出剪輯請求。</p>
		<p>這<code translate="no">輸出</code>請求正文中的字段支持所有相同的字段<code translate="no">產出</code>標準 VOD 端點中的字段。然而，<strong>預定的剪輯僅支持單個輸出，而不支持列表</strong>。看<a href="/live-api/guides/live-api-creating-vod-clips.html">視頻點播支持文檔</a>有關可用字段的詳細信息。</p>
		<p>通常，您會設置<code translate="no">時間_UTC</code>以匹配剪輯的結束邊界。預定時間<strong>必須</strong>剪輯的結束邊界之後，否則剪輯請求將在計劃的時間失敗。</p>
		<p>時間戳<code translate="no">時間_UTC</code>字段必須是 UTC 格式，以秒為單位的 unix 時間戳。您可以使用<a href="https://www.unixtimestamp.com/" rel="nofollow">https://www.unixtimestamp.com/</a>進行轉換。</p>
		<p>假設我們要安排一個 15 分鐘的剪輯，該剪輯將在<code translate="no">2021-02-09T13:55:00+00:00</code> .我們可以使用<code translate="no">output.start_time</code>和<code translate="no">output.end_time</code>將我們的剪輯邊界指定為以秒為單位的 unix 時間。（再次，請參見<a href="/live-api/guides/live-api-creating-vod-clips.html">視頻點播支持文檔</a>（有關可用字段的詳細信息）。</p>
		<pre><code translate="no">開始時間：2021-02-09T13:55:00+00:00 = 1612878900 結束時間：2021-02-09T14：上午十點以上</code> </pre>
		<p>由於調度器還需要一個時間來調度剪輯請求，我們可以使用相同的值<code translate="no">時間結束</code>因為它也是以秒為單位的 unix 時間。</p>
		<p>我們還想為剪輯創建一個 Videocloud 視頻，因此我們將其包含在<code translate="no">輸出</code> .在計劃工作流程時將創建一個Videocloud視頻，其ID將在響應中返回，以便您可以在製作剪輯之前知道該視頻ID。如果您以後取消剪輯請求或它在預定的時間失敗，則不會將Videocloud Video從您的帳戶中刪除。</p>
		<h3>要求</h3>
		<p>要創建工作流，請執行以下操作<code translate="no">郵政</code>要求：</p>
		<pre><code class="language-http" translate="no">https://api.bcovlive.io/v1/scheduler/clip</code></pre>
		
		<h3>標頭</h3>
		
<pre><code translate="no">內容類型：application/json X-API-KEY：您的 API 密鑰</code></pre>
		
		<h3>要求正文</h3>
<pre class="line-numbers"><code class="language-json" translate="No">{
	"job_id":  "your Job ID",
	"description": "My Scheduled Clip",
	"clip": {
		"output": {
			"label": "My Scheduled Clip",
			"start_time": 1612878900,
			"end_time": 1612879800,
			"videocloud": {
				"video": {
					"name": "My Scheduled Clip"
				}
			}
		},
		"time_utc": 1612879800
	}
}</code></pre>
		
<details>
	<summary>樣品回复</summary>
<pre><code class="language-json" translate="no">{ "account_id": "your Account ID", "description": "My Tuesday Clip", "type": "clip", "job_id": "your Job ID", "clip": { "state": "pending", "output": { "label": "My Scheduled Clip", "start_time": 1612878900, "end_time": 1612879800, "videocloud": { "video": { "id": "70702010152202", "name": "My Scheduled Clip" } } }, "time_utc": 1612879800 } "workflow_id": "d44cf29f4f184757ac0995beb8a0097e", }</code></pre>
</details>		
		<p>注意<code translate="no">clip.output.videocloud.video.id</code>包含新創建的 Videocloud Video 的 ID。在<code translate="no">時間_UTC</code>視頻源將使用攝取的剪輯進行更新。</p>
		</section>
		<section class="bcls-section">
			<h2 id="Update_a_Clip_scheduler_workflow">更新剪輯計劃程序工作流程</h2>
			<p>您可以同時更新<code translate="no">輸出</code>和<code translate="no">時間_UTC</code>你的剪輯。這些只能在作業處於掛起狀態時更新：<code translate="no">“狀態”：“待定”</code> .</p>
			<p>在前面的示例之後，我們希望剪輯比計劃的短5分鐘。當更新<code translate="no">輸出</code>字段，您必須提供完整的對象，而不僅僅是所做的更改。這包括上面的create調用返回的Videocloud Video ID。</p>
			<p>請注意，在此示例中，我們同時更新了<code translate="no">時間結束</code>和<code translate="no">時間_UTC</code>以反映 5 分鐘的減少。</p>
			<h3>要求</h3>
			<p>要更新工作流，請執行以下操作<code translate="no">放</code>要求：</p>
			<pre><code class="language-http" translate="no">https://api.bcovlive.io/v1/scheduler/clip/<span class="bcls-input">{workflow_id}</span></code></pre>
			
			<h3>標頭</h3>
			
	<pre><code translate="no">內容類型：application/json X-API-KEY：您的 API 密鑰</code></pre>
			
			<h3>要求正文</h3>
	<pre class="line-numbers"><code class="language-json" translate="No">{
		"clip": {
			"output": {
				"label": "My Scheduled Clip",
				"start_time": 1612878900,
				"end_time": 1612879500,
				"videocloud": {
					"video": {
						"id": "70702010152202",
						"name": "My Scheduled Clip"
					}
				}
			},
			"time_utc": 1612879500
		}
	}</code></pre>
			
	<details>
		<summary>樣品回复</summary>
	<pre><code class="language-json" translate="no">{ "account_id": "your Account ID", "description": "My Tuesday Clip", "type": "clip", "job_id": "your Job ID", "clip": { "state": "pending", "output": { "label": "My Scheduled Clip", "start_time": 1612878900, "end_time": 1612879500, "videocloud": { "video": { "id": "70702010152202", "name": "My Scheduled Clip" } } }, "time_utc": 1612879500 } "workflow_id": "d44cf29f4f184757ac0995beb8a0097e", }</code></pre>
	</details>		
	</section>
	<section class="bcls-section">
		<h2 id="Cancel_a_Clip_scheduler_workflow">取消剪輯計劃程序工作流程</h2>
		<p>您可以使用<code translate="no">刪除</code>要求。</p>
		<p>請注意，在取消剪輯工作流程時，在安排時間創建的任何Videocloud視頻都將<strong>不是</strong>被後端刪除。您必須手動從Videocloud帳戶中刪除孤立的視頻。</p>
		<h3>要求</h3>
		<p>要更新工作流，請執行以下操作<code translate="no">刪除</code>要求：</p>
		<pre><code class="language-http" translate="no">https://api.bcovlive.io/v1/scheduler/clip/<span class="bcls-input">{workflow_id}</span></code></pre>
		
		<h3>標頭</h3>
		
X-API-KEY：您的API密鑰</code></pre>
		
		<h3>要求正文</h3>
		<p>沒有此請求的請求主體。</p>		
<details>
	<summary>樣品回复</summary>
<pre><code class="language-json" translate="no">{ "account_id": "your Account ID", "description": "My Tuesday Clip", "type": "clip", "job_id": "your Job ID", "clip": { "state": "cancelled", "output": { "label": "My Scheduled Clip", "start_time": 1612878900, "end_time": 1612879500, "videocloud": { "video": { "id": "70702010152202", "name": "My Scheduled Clip" } } }, "time_utc": 1612879500 } "workflow_id": "d44cf29f4f184757ac0995beb8a0097e", }</code></pre>
</details>		
</section>
<section class="bcls-section">
  <h2 id="notifications">通知</h2>
  <p>您可以選擇在創建工作流程時配置通知。您需要為我們的服務提供一個 URL <code translate="no">郵政</code>到。當調度程序進行剪輯調用時，我們將發送通知。您還可以配置接收通知<code translate="no">n</code>剪輯前幾秒。見<a href="/live-api/guides/live-scheduler-notifications.html">實時調度程序通知</a>更多細節。</p>
	<details>
		<summary>樣品索取主體</summary>
	<pre><code class="language-json" translate="no">{ "job_id": "你的工作 ID", "描述":“我的預定剪輯”，<span class="bcls-highlight"> "notification_url": "http://example.com/live/clip/callbacks"</span>， “夾子”：{ "output": { "label": "My Scheduled Clip", "start_time": 1612878900, "end_time": 1612879800, "videocloud": { "video": { "name": "My Scheduled Clip" } } }, "time_utc": 1612879800, <span class="bcls-highlight">“通知”：600 </span> }} </code> </pre>
	</details>
</section>
<section class="bcls-section">
	<h2 id="related_topics">相關主題</h2>
	<ul>
		<li><a href="/live-api/guides/live-scheduler.html">概述：實時調度</a></li>
		<li><a href="/live-api/guides/live-scheduler-stop-start.html">計劃SEP流的激活/去激活</a></li>
		<li><a href="/live-api/guides/live-scheduler-notifications.html">實時調度程序通知</a></li>
		<li><a href="/live-api/guides/live-api-static-entry-points.html">靜態入口點（SEP）作業</a></li>
		<li><a href="/live-api/references/reference-staging.html">實時API參考</a></li>
		<li><a href="/live-module/scheduling-live-event.html">自動開始/停止控制室中的現場活動</a></li>
	</ul>
</section>
</article>