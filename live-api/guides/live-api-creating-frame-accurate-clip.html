---
title: '實時 API：建立正確框架的剪輯片段'
parent: Guides 
grandparent: Live API
---
 <h1>此頁面已移動-您將在 3 秒內被導向到<a href="https://apis.support.brightcove.com/live-api/guides/live-api-creating-frame-accurate-clip.html">新位置</a>。請更新您的書籤！</h1>
<script type="text/javascript">
var t = setTimeout(function() { window.location.href = 'https://apis.support.brightcove.com/live-api/guides/live-api-creating-frame-accurate-clip.html'; } , 3000);
</script>
<article class="bcls-article">
  <h1>實時 API：建立精確影格的剪輯</h1> 
  <summary>本教程將向您介紹如何使用Live API創建實時作業，然後從中創建幀精確的剪輯。</summary>




<section class="bcls-section">
<h2 id="Overview">概述</h2>
<!-- <figure class="bcls-figure">
        <img src="/assets/images/live-api/18699/block-diagram-small.png" alt="general-block-diagram" title="Block diagram">
        <figcaption class="bcls-caption--image">Block Diagram</figcaption>
      </figure> -->

<p>本教程在API級別說明瞭如何在中創建實時流作業<a href="/">Brightcove直播</a>然後從中創建精確到幀的剪輯。</p>

<p>請注意，精確到幀的裁剪要求編碼器發送SMPTE時間碼。</p>

<p>本教程將使用<a translate="No" href="https://general.support.brightcove.com/developer/concepts-set-curl.html">捲曲</a>發出 API 請求，但您可以輕鬆地在<a translate="No" href="https://apis.support.brightcove.com/general/use-insomnia-api-requests.html">失眠</a> , <a translate="No" href="https://apis.support.brightcove.com/general/use-postman-api-requests.html">郵差</a>或其他 REST 客戶端。</p>
</section>

<section class="bcls-section">
<h2 id="create_a_live_job">創建現場工作</h2>

<p>首先，我們將創建一個現場工作。您將需要一個<code translate="No">API-KEY</code>實時API。如果您不這樣做，並且對獲得訪問權限感興趣，請與您的客戶經理聯繫。</p>

<ol class="bcls-tasklist">
	<li>我們假設您已經有一個Brightcove帳戶，並且您已經有了API-KEY，我們稱之為<code translate="No">bcov-live-api-key</code></li>
	<li>
	<p>複製並粘貼以下內容<span translate="No">捲曲</span>命令進入文本編輯器：</p>

	<pre class="line-numbers">
  <code class="language-bash" translate="No">curl -X POST \
    https://api.bcovlive.io/v1/jobs \
    -H 'Content-Type: application/json' \
    -H 'x-api-key: {{bcov-live-api-key}}' \
    -d '{
      "live_stream": true,
      "region": "{{closest-region-encoder}}",
      "outputs": [{
        "label": "hls360p",
        "live_stream": true,
        "height": 360,
        "video_bitrate": 365,
        "segment_seconds": 6,
        "keyframe_interval": 60
      },
      {
        "label": "hls432p",
        "live_stream": true,
        "height": 432,
        "video_bitrate": 730,
        "segment_seconds": 6,
        "keyframe_interval": 60
      },
      {
        "label": "hls540p",
        "live_stream": true,
        "height": 540,
        "video_bitrate": 2000,
        "segment_seconds": 6,
        "keyframe_interval": 60
      },
      {
        "label": "hls720p3M",
        "live_stream": true,
        "height": 540,
        "video_bitrate": 2000,
        "segment_seconds": 6,
        "keyframe_interval": 60
      },
      {
        "label": "hls720p4.5M",
        "live_stream": true,
        "height": 540,
        "video_bitrate": 4500,
        "segment_seconds": 6,
        "keyframe_interval": 60
      }]
    }'
  </code></pre>
	</li>
	<li>
	<p><strong>代替：</strong></p>

	<ul>
		<li><code translate="No">{{closest-region-encoder}}</code>距離編碼器最近的可用區域，請參見<a href="/live-api/getting-started/overview-brightcove-live-api.html#Support_aws_regions">最近可用區域</a>到您的編碼器。例如：<code translate="No">us-west-2</code></li>
		<li><code translate="No">{{bcov-live-api-key}}</code>使用您的Brightcove實時API密鑰。例如：<code translate="No">abcdfeg-this-is-a-fake-api-key-FgJajjasd12hJHsZ</code></li>
	</ul>
	</li>
	<li>進行了這些更改之後，將代碼複製並粘貼到Terminal或您使用的任何命令行應用程序中，然後運行它。</li>
	<li>
	<p>響應應該是這樣的：</p>

	<pre class="line-numbers">
  <code class="language-json" translate="No">{
      "id": "3b6871bf2f344acaa6b397d09b476018",
      "outputs": [... removed for simplicity ...],
      "stream_url": "rtmp://ep1-usw2.bcovlive.io:1935/3b6871bf2f344acaa6b397d09b476018",
      "stream_name": "alive",
      "static": false,
      "encryption": {},
      "playback_url": "https://bcovlive-a.akamaihd.net/3b6871bf2f344acaa6b397d09b476018/us-west-2/NA/playlist.m3u8",
      "playback_url_dvr": "https://bcovlive-a.akamaihd.net/3b6871bf2f344acaa6b397d09b476018/us-west-2/NA/playlist_dvr.m3u8"
  }</code></pre>
	</li>
</ol>

<p>此工作將創建5個演繹版本<strong>基於</strong>上<a href="https://developer.apple.com/documentation/http_live_streaming/hls_authoring_specification_for_apple_devices">蘋果推薦</a>。</p>
</section>

<section class="bcls-section">
<h2 id="Configure_your_encoder">設定您的編碼器</h2>

<p>此處顯示的步驟將假定<a href="https://www.elemental.com/products/aws-elemental-live">元素直播盒</a>編碼器，用於測試本教程的步驟。如果您使用其他編碼器，則設置應相似。</p>

<p>在這種情況下，最重要的設置是：</p>

<ul>
	<li>將時間碼源配置為“系統時鐘"</li>
	<li>將“OnFi時間碼頻率"設置為1</li>
	<li>檢查視頻中的“時間碼插入"</li>
	<li>強烈推薦：幀率=跟隨來源</li>
</ul>

<p>這是我們用於此實驗的配置：</p>

<figure class="bcls-figure"><img alt="elemental-live-job-config" title="Elemental live config" src="/assets/images/live-api/18699/elemental-live-job-config-v1-small.png" />
<figcaption class="bcls-caption--image">元素實時配置</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="test_playback">測試播放</h2>

<p>你可以用這個<a href="https://videojs.github.io/videojs-contrib-hls/">VideoJS HLS演示頁</a>要測試播放，只需粘貼值<code translate="No">playback_url</code>在創建作業響應中返回：</p>

<figure class="bcls-figure"><img alt="videojs-hls-playback" title="VideoJS HLS playback demo page" src="/assets/images/live-api/18699/videojs-hls-playback-small.png" />
<figcaption class="bcls-caption--image">VideoJS HLS播放演示頁面</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="create_frame_accurate_clip">創建精確到幀的剪輯</h2>

<p>在本教程中，我們將假定您將剪輯發送到您的Video Cloud庫。如果您將剪輯發送到S3存儲桶或其他某個位置，則過程是相同的-API請求的請求正文中僅存在一些細微差別。</p>

<section class="bcls-subsection">
<h3 id="video-cloud-credentials">證書</h3>

<p>如果您尚未在Live帳戶中創建Video Cloud的憑據，則可以按照此處的步驟進行操作。這是一次性操作。</p>

<p>如果您還沒有用於將視頻動態攝取到Video Cloud的客戶端憑據，則需要創建它們。看<a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">管理API身份驗證憑據</a>有關在Studio中執行此操作的說明。</p>

<ol class="bcls-tasklist">
	<li>將下面的curl命令複製到文本編輯器中：
	<pre class="line-numbers">
<code class="language-bash" translate="No">curl -X POST \ https://api.bcovlive.io/v1/credentials \ -H 'Content-Type: application/json' \ -H 'x-api-key: {{bcov-live-api-key}}' \ -d '{ "credential_default_for_type": true, "credential_label": "Video_Cloud_Uploads", "credential_private": "{{client_secret}}", "credential_public": "{{client_id}}", "credential_type": "videocloud" }' </code></pre>
	</li>
	<li>
	<p><strong>代替：</strong></p>

	<ul>
		<li><code translate="No">{{bcov-live-api-key}}</code>用您的Live API密鑰</li>
		<li><code translate="No">{{client_secret}}</code>用你的客戶秘密</li>
		<li><code translate="No">{{client_id}}</code>使用您的客戶ID</li>
	</ul>
	</li>
	<li>將編輯後的命令複製並粘貼到Terminal或您的命令行應用程序中，然後運行它。</li>
	<li>響應應類似於以下內容：
	<pre class="line-numbers">
  <code class="language-json" translate="No">{
    "credential_id": "1e0180330b724dfbbcaf6b28b6c5d517",
    "user_id": "c2691d4d039040be96c190a949d754a7",
    "credential_label": "Video_Cloud_Uploads"
  }</code></pre>
	</li>
</ol>
</section>

<section class="bcls-subsection">
<h3 id="create_clip">創建剪輯</h3>

<p>擁有Video Cloud憑據後，就可以創建剪輯了。</p>

<ol class="bcls-tasklist">
	<li>複製下面的curl請求並將其粘貼到文本編輯器中：
	<pre class="line-numbers">
  <code class="language-bash" translate="No">curl -X POST \
    https://api.bcovlive.io/v1/vods \
    -H 'Content-Type: application/json' \
    -H 'x-api-key: {{bcov-live-api-key}}' \
    -d '{
      "live_job_id":"{{bcov-live-job-id}}",
      "outputs":[{
          "label": "Trim by SMPTE TC 17:33:11:12 to 17:34:00:00",
        "stream_start_timecode": "{{timecode-in}}",
        "stream_end_timecode": "{{timecode-out}}",
          "videocloud":{"ingest":{"capture-images":true},"video":{"name":"test-frame-accurate-clip"}},
          "credentials": "{{video-cloud-credentials}}"
      }]
  }'</code></pre>
	</li>
	<li>
	<p><strong>代替：</strong></p>

	<ul>
		<li><code translate="No">{{bcov-live-api-key}}</code>使用您的Brightcove實時API密鑰。例如：<code translate="No">abcdfeg-this-is-a-fake-api-key-FgJajjasd12hJHsZ</code></li>
		<li><code translate="No">{{bcov-live-job-id}}</code>在您對創建實時作業的請求的響應中包含作業ID。在我們的示例中，該值為<code translate="No">3b6871bf2f344acaa6b397d09b476018</code> -您的會有所不同。</li>
		<li><code translate="No">{{timecode-in}}</code>和<code translate="No">{{timecode-out}}</code>應該是在您的直播流中有意義（存在）的值。在我們的示例中，我們使用了：<code translate="No">17:33:11:12</code>和<code translate="No">17:34:00:00</code></li>
		<li><code translate="No">{{video-cloud-credentials}}</code>帶有您的視頻雲憑據的標籤。如果您還沒有它們，並使用上述步驟創建了它們，則將是<code translate="No">Video_Cloud_Uploads</code></li>
	</ul>
	</li>
	<li>將編輯後的代碼複製並粘貼到Terminal或您的命令行應用程序中，然後運行它。</li>
	<li>響應應類似於以下內容：
	<pre class="line-numbers">
  <code class="language-json" translate="No">{
      "vod_jobs": [
          {
              "jvod_id": "0b14a4ba326d4dd08f15053ca2a403b7",
              "label": "Trim by SMPTE Timecodes"
          }
      ],
      "live_job_id": "3b6871bf2f344acaa6b397d09b476018"
  }</code></pre>
	</li>
</ol>

<p>我們測試了實驗的準確性，我們下載了剪輯並使用了<a href="https://www.adobe.com/products/premiere.html">Adobe首映</a>可以檢查第一幀和最後一幀，因為時間碼被覆蓋了，所以簡單的視覺檢查就足以確認輸入和輸出點的準確性：</p>

<figure class="bcls-figure"><img alt="clip-accuracy-in" title="Visual clip accuracy test - in" src="/assets/images/live-api/18699/clip-accuracy-in-small.png" />
<figcaption class="bcls-caption--image">視覺剪輯準確性測試-輸入</figcaption>
</figure>

<figure class="bcls-figure"><img alt="clip-accuracy-out" title="Visual clip accuracy test - out" src="/assets/images/live-api/18699/clip-accuracy-out-small.png" />
<figcaption class="bcls-caption--image">視覺片段準確性測試-輸出</figcaption>
</figure>

<p>&nbsp;</p>
</section>
</section>
</article>