---
title: '實時 API：直播活動的 VOD '
parent: Guides 
grandparent: Live API
---
 <h1>此頁面已移動-您將在 3 秒內被導向到<a href="https://apis.support.brightcove.com/live-api/guides/live-api-vod-live-event.html">新的位置</a>。請更新您的書籤！</h1>
<script type="text/javascript">
var t = setTimeout(function() { window.location.href = 'https://apis.support.brightcove.com/live-api/guides/live-api-vod-live-event.html'; } , 3000);
</script>
<article class="bcls-article">
  <h1>實時 API：來自現場活動的 VOD</h1>
  <summary>在本主題中，您將學習如何在事件完成後從實時流事件創建視頻點播（VOD）。</summary>

  <aside class="bcls-aside bcls-aside--information">Live to VOD 不能與加密流一起使用，並且在創建 Live 作業事件時會返回錯誤。</aside>



<section class="bcls-section">
<h2 id="Introduction">簡介</h2>

<p>對於較短的直播活動，您可能希望將活動錄製成視頻點播 (VOD) <span translate="No">視頻雲</span>活動結束後的賬號。您可以在添加VOD時添加一些配置，從而輕鬆完成此操作<a href="/live-api/references/reference.html#api-Live_Jobs-Create_a_Live_Job">創建您的現場工作</a>。</p>

<p>快速直播到VOD可以快速以片段精度發布剪輯，而對客戶完全透明的後端流程將清理剪輯邊界並重新發布。</p>

<p>這樣一來，剪輯就可以更快地推向市場，該剪輯將根據所需的剪輯邊界自動重新發布。</p>

<p><strong>重要的</strong>：</p>

<ul>
	<li>直播活動結束後，停止編碼器，但是<strong>不要<a href="/live-api/references/reference.html#api-Live_Jobs-Cancel_Live_Job">取消</a>工作</strong>。請等到創建VOD剪輯後再取消作業，否則將無法成功創建。</li>
	<li>直到開始播放VOD之前，VOD的創建才會開始。<code translate="No">reconnect_time</code>現場作業已過期。</li>
	<li>如果現場直播的時長大於24小時，則僅最後24小時將被記錄在VOD中。</li>
</ul>

<section class="bcls-subsection">
<h3 id="fast_vod">快速VOD選項</h3>

<p>快速VOD選項使您可以更快地獲取現場直播的VOD版本。快速點播到VOD將發布（使用transmux）實時再現，將<strong>細分準確</strong>。</p>

<p>的<code translate="No">output</code>快速VOD的字段為：</p>

<ul>
  <li><code translate="No">live_to_vod</code>設定為<code translate="No">true</span></code>    </li>
	<li><code translate="No">mode</code>（快速VOD必需）-對於快速VOD，該值將為<code translate="No">instant</code></li>
	<li><code translate="No">playlist_label</code>（可選）-僅適用於即時模式VOD。指示用於創建VOD輸出（來自實時作業）的播放列表。僅在創建實時作業時定義了自定義播放列表時才需要。</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Implementation">實作</h2>

<h3>當您創建現場作業時</h3>
<p>實況轉播到VOD的最簡單方法是包括<code translate="No">"live_to_vod": true</code>創建作業時，請求正文中的字段，位於：</p>
<ul>
  <li>頂層<code translate="No">videocloud</code>對象（將VOD創建為遠程資產）</li>
  <li>輸出到Video Cloud或S3的輸出對象</li>
</ul>
<h4>發給<span translate="No">視頻雲</span></h4>

<p>請注意，有兩種方法可以<code translate="No">videocloud</code>創建新的實時作業時將使用對象：</p>

<ol class="bcls-tasklist-restart">
	<li>包含<code translate="No">videocloud</code>在裡面<strong>工作級字段</strong>將在<span translate="No">視頻雲</span>將直播作為遠程資產的帳戶，並在您的視頻雲庫中創建 VOD：

	<pre class="line-numbers">
<code class="language-json" translate="No">{
    "live_stream": true,
    "region": "us-west-2",
    "reconnect_time": 2400,
    "live_dvr_sliding_window_duration": 30,
    <strong>
      "videocloud": {
        "video": {
          "name": "test_live_stream"
        },
        <span class="bcls-highlight">"live_to_vod": true</span>
        }
    </strong></code></pre>
	</li>
	<li>
	<p>包括<code translate="No">videocloud</code>對象的屬性<code translate="No">outputs</code>剪輯或完整的 VOD 對象將創建一個<span translate="No">視頻雲</span>剪輯的視頻 - 剪輯被攝取到<span translate="No">視頻雲</span>並成為 VOD 庫的一部分：</p>

	<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 2400,
  "live_dvr_sliding_window_duration": 30,
	"videocloud": {
		"video": {
			"name": "test_live_stream"
		}
	},
  "outputs": [
    { "videocloud": {
        "video": {
            "name": "video name",
        },
        "ingest": {
            "profile": "<span class="bcls-input">valid-ingest-profile-name</span>"
        }
    },
    "credentials": "<span class="bcls-input">USER_VIDEOCLOUD_CREDENTIAL_LABEL</span>"
    }
  ]
}</code></pre>
    <p>注意：忽略“攝取-配置文件"字段以使用該帳戶的默認攝取配置文件。</p>
	</li>
</ol>

<p>您還可以包括<code translate="no">視頻雲</code>輸出對像中的對象（在這種情況下，您不需要<code translate="No">live_to_vod</code>場地）：</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 600,
  "ad_insertion": false,
  "outputs": [
    { OTHER_JOB_OUTPUT_OBJECT },
    { OTHER_JOB_OUTPUT_OBJECT_2 },
    <span class="bcls-highlight">{ "videocloud": {
        "video": {
            "name": "video name",
            "description": "video description",
            "long_description": "long description",
            "tags": [
            "tag1", "tag2"
            ],
            "schedule":
            { "starts_at": "2017-01-01T12:00:00-04:00", "ends_at": "2099-01-01T12:00:00-04:00" }
            ,
            "custom_fields": {
                "someCustomField": "value"
            },

        },
        "ingest": {
            "profile": "<span class="bcls-input">valid-ingest-profile-name</span>"
        }
    },
    "credentials": "<span class="bcls-input">USER_VIDEOCLOUD_CREDENTIAL_LABEL</span>"
    } </span>
  ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">如果您還沒有設置 Video Cloud 帳戶的憑據，則可以添加新憑據<a href="/live-api/references/reference.html#operation/CreateCredential">通過 API</a> .</aside>

<p>請注意，對於視頻元數據，您可以包括為<a href="https://docs.brightcove.com/cms-api/v1/doc/index.html#api-videoGroup-Create_Video">建立影片</a> CMS API的操作。</p>

<p>攝取配置文件定義將為VOD創建的演繹形式。為了<code translate="No">valid-ingest-profile-name</code>，您可以將任何自定義或標準提取配置文件的名稱替換為您的帳戶。您擁有的標準配置文件取決於您的帳戶是否啟用了動態投放。見<a href="https://apis.support.brightcove.com/ingest-profiles/references/standard-ingest-profiles-dynamic-delivery-and-context-aware-encoding.html">用於動態交付和上下文感知編碼的標準攝取配置文件</a>或者<a href="https://apis.support.brightcove.com/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">舊版轉碼的標準攝取配置文件</a>。</p>

<aside class="bcls-aside bcls-aside--information">請注意，<code translate="No">profile</code>字段是可選的。如果您不指定配置文件，則將使用帳戶的默認配置文件。</aside>

<h4>發送到S3</h4>

<p>要將事件的VOD版本保存到您的S3存儲桶中，請包含突出顯示的版本<strong>輸出</strong>以下。</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 600,
  "ad_insertion": false,
  "outputs": [
    { OTHER_JOB_OUTPUT_OBJECT },
    { OTHER_JOB_OUTPUT_OBJECT_2 },
    <span class="bcls-highlight">{
      "url":"s3://YOUR_BUCKET/path/filename.mp4",
      "credentials": "<span class="bcls-input">YOUR_CREDENTIAL_LABEL</span>",
      "notifications": [
        {
          "url": "http://httpbin.org/post?vodStateChange"
        },
        {
          "url": "http://httpbin.org/post?vodFinished",
          "event": "output_finished"
        }
      ]
    }</span>
  ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">在設置您的真實賬戶時，應該已經為您的 S3 存儲桶創建了有效用戶名+密碼的憑證標籤，並將憑證標籤發送給您。如果你沒有，請<a href="https://supportportal.brightcove.com/s/login/?language=en_US">聯繫 Brightcove 支持</a>.</aside>
<h3>將VOD創建為開放式視頻剪輯</h3>
<p>獲取現場直播視頻點播的另一種方法是<a href="/live-api/guides/live-api-creating-vod-clips.html">創建一個VOD剪輯</a>沒有結束時間。有關完整的詳細信息，請參閱剪輯文件。</p>
</section>

<section class="bcls-section">
<h2 id="Limitations">限制</h2>

<ul>
	<li>如果你<a href="/live-api/references/reference.html#api-Live_Jobs-Stop_Live_Job">停止（取消）</a>在創建VOD之前的實時作業，將不會創建。相反，請停止編碼器以啟動VOD的創建，並等待其完成後再停止作業。</li>
	<li>為了<a href="/live-api/guides/live-api-static-entry-points.html">靜態入口點</a>流<strong>只要</strong>，無法將Live to VOD設置為在完成時將流存檔。
	<p style="font-weight:bold;">備擇方案：</p>

	<ul>
		<li>用<a href="/live-api/guides/live-api-creating-vod-clips.html">剪裁</a>將完整的直播活動存檔為VOD。在事件發生後或直到SEP下次激活（以較短者為準）之後的標準時間內，剪輯窗口將可用。</li>
	</ul>
	</li>
</ul>
</section>
</article>